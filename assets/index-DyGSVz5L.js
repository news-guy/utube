import{a as y,r as d,j as e,M as E,c as T}from"./vendor-F0hFHOMo.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function c(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=c(t);fetch(t.href,s)}})();const g="https://your-deployed-api.example.com/api";async function R(a){try{return(await y.get(`${g}/transcript/${a}`)).data}catch(r){throw console.error("Error fetching transcript:",r),new Error("Failed to fetch transcript or auto-generated captions")}}async function P(a){try{return(await y.post(`${g}/summarize/full`,{transcript:a})).data.summary}catch(r){throw console.error("Error generating summary:",r),new Error("Failed to generate summary")}}async function A(a){try{return(await y.post(`${g}/summarize/incremental`,{segments:a})).data.summaries}catch(r){throw console.error("Error generating incremental summaries:",r),new Error("Failed to generate incremental summaries")}}async function L(a){try{const r=await R(a);return{status:200,data:{transcript:r.fullText,segments:r.segments}}}catch(r){return console.error("Transcript API error:",r),{status:500,data:{error:"Failed to fetch transcript or auto-generated captions"}}}}async function N(a,r,c){try{return c==="full"?{status:200,data:{summary:await P(a)}}:{status:200,data:{summaries:await A(r)}}}catch(n){return console.error("Summarize API error:",n),{status:500,data:{error:"Failed to generate summary"}}}}function z(){const[a,r]=d.useState(""),[c,n]=d.useState(!1),[t,s]=d.useState(""),[p,x]=d.useState(""),[w,j]=d.useState([]),[v,S]=d.useState(""),I=i=>{const u=/(?:youtube\.com\/(?:[^/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?/\s]{11})/,m=i.match(u);return m?m[1]:null},F=async i=>{i.preventDefault(),n(!0),s(""),x(""),j([]),S("");const u=I(a);if(!u){s("Invalid YouTube URL"),n(!1);return}try{const m=`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${u}`;try{const o=await fetch(m);if(o.ok){const l=await o.json();l.title&&S(l.title)}}catch(o){console.error("Error fetching video info:",o)}const h=await L(u);if(h.status!==200)throw new Error(h.data.error||"Failed to fetch transcript or auto-generated captions");const{transcript:f,segments:b}=h.data;if(f){const o=await N(f,b||[],"full");if(o.status!==200)throw new Error(o.data.error||"Failed to generate full summary");o.data.summary&&x(o.data.summary);const l=await N(f,b||[],"incremental");if(l.status!==200)throw new Error(l.data.error||"Failed to generate incremental summaries");l.data.summaries&&j(l.data.summaries)}}catch(m){s(m instanceof Error?m.message:"An unexpected error occurred")}finally{n(!1)}};return e.jsxs("div",{className:"app-container",children:[e.jsxs("header",{children:[e.jsx("h1",{children:"YouTube Video Summarizer"}),e.jsx("p",{children:"Enter a YouTube URL to get an AI-generated summary"})]}),e.jsxs("form",{onSubmit:F,className:"url-form",children:[e.jsx("input",{type:"text",value:a,onChange:i=>r(i.target.value),placeholder:"https://www.youtube.com/watch?v=...",required:!0,className:"url-input"}),e.jsx("button",{type:"submit",disabled:c,className:"submit-button",children:c?"Summarizing...":"Summarize"})]}),t&&e.jsx("div",{className:"error-message",children:t}),c&&e.jsxs("div",{className:"loading-message",children:[e.jsx("p",{children:"Fetching transcript and generating summaries..."}),e.jsx("p",{children:"If no transcript is available, we'll try to use auto-generated captions."}),e.jsx("p",{children:"This may take a minute depending on video length."})]}),v&&e.jsx("div",{className:"video-title",children:e.jsxs("h2",{children:["Video: ",v]})}),p&&e.jsxs("div",{className:"summary-container",children:[e.jsx("h2",{children:"Full Video Summary"}),e.jsx("div",{className:"summary-content",children:e.jsx(E,{children:p})})]}),w.length>0&&e.jsxs("div",{className:"summary-container",children:[e.jsx("h2",{children:"Segment Summaries"}),w.map((i,u)=>e.jsxs("div",{className:"segment-summary",children:[e.jsx("h3",{children:i.time}),e.jsx("div",{className:"summary-content",children:e.jsx(E,{children:i.summary})})]},u))]}),e.jsx("footer",{children:e.jsx("p",{children:"Powered by YouTube Transcript API and GPT-4o-mini"})})]})}T.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(z,{})}));
